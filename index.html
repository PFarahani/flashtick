<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashTick: Flashcard Practice - SRS Learning</title>
    <!-- Importing Nunito for that friendly, rounded look -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;charset=utf8,%3Csvg%20width=%22100%25%22%20height=%22100%25%22%20viewBox=%220%200%201024%201024%22%20version=%221.1%22%20xmlns=%22http://www.w3.org/2000/svg%22%20xmlns:xlink=%22http://www.w3.org/1999/xlink%22%20xml:space=%22preserve%22%20xmlns:serif=%22http://www.serif.com/%22%20style=%22fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;%22%3E%3Cg%3E%3Cpath%20d=%22M0.3,223.541c6.053,-120.578%20102.966,-217.381%20223.59,-223.258c29.257,-0.211%20121.185,-0.255%20290.11,-0.133l287.293,0.193c119.688,6.43%20215.755,102.394%20222.346,222.039c0.183,29.827%200.304,102.451%200.361,187.005l0,230.798c-0.052,73.687%20-0.159,134.842%20-0.321,160.685c-3.156,60.776%20-29.397,115.486%20-70.113,155.521c-17.507,17.036%20-38.269,31.935%20-59.316,42.458c-4.404,2.202%20-8.661,4.225%20-12.839,6.078c-25.004,10.761%20-52.239,17.314%20-80.811,18.765c-35.26,0.179%20-138.366,0.307%20-288.649,0.307c-159.017,0%20-255.257,-0.094%20-288.524,-0.306c-35.338,-1.791%20-68.632,-11.386%20-98.19,-27.095c-11.727,-6.273%20-22.924,-13.509%20-33.236,-21.549c-19.403,-15.091%20-36.538,-33.169%20-50.363,-52.891c-24.308,-35.172%20-39.297,-77.267%20-41.386,-122.705l0.048,-288.454l0,-287.459Zm723.65,696.309c13.65,-2.85%2028.65,-9.4%2038.95,-16.95c22.95,-16.8%2036.95,-39.3%2041.5,-66.55c0.75,-4.75%200.85,-26.6%201,-314.85c0.1,-209.55%200,-311.8%20-0.35,-316.1c-2.2,-27.15%20-12.4,-49.3%20-31.2,-67.9c-16.6,-16.5%20-36.1,-26.1%20-60.35,-29.85c-5.45,-0.85%20-16.5,-0.9%20-202.5,-0.9l-196.75,0l-6.25,1.15c-24.15,4.4%20-43.05,14.3%20-59.7,31.3c-8.35,8.6%20-13.45,15.8%20-18.8,26.95c-5,10.25%20-7.5,18.2%20-9.6,30.1l-1.15,6.5l0,312.25c0,247.6%200.15,313.3%200.65,317.45c1.65,13.95%207.35,30.7%2013.9,41.15c5.25,8.35%2014.75,18.9%2023.2,25.75c14.8,11.95%2034.05,19.85%2053,21.8c0.95,0.1%2093.1,0.15%20204.75,0.15l203,-0.05l6.7,-1.4Z%22%20style=%22fill:%235ac4d0;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M761.549,509.201c0.168,13.397%200.284,78.976%200.239,157.149c-0.101,145.8%20-0.151,159.8%20-0.907,163.9c-3.074,16.55%20-12.447,30.75%20-26.304,39.9c-8.315,5.5%20-16.226,8.6%20-25.196,9.85c-4.283,0.6%20-372.289,1.05%20-387.205,0.45c-13.001,-0.5%20-22.626,-3.65%20-33.006,-10.85c-14.865,-10.3%20-24.49,-26.4%20-26.455,-44.2c-0.664,-6.307%20-0.703,-283.933%20-0.117,-316.118c0.037,-2.006%200.076,-3.059%200.117,-3.032c0.162,0.107%200.542,0.661%201.008,1.453c0.402,0.683%200.867,1.544%201.31,2.447c5.14,10.15%2012.043,19.5%2020.761,28.2c21.97,21.95%2048.678,34.15%2079.063,36.15c22.525,1.5%2046.259,-3.65%2065.659,-14.25c22.525,-12.35%2041.169,-31.75%2052.004,-54.25c3.779,-7.8%205.039,-11.1%206.954,-17.9c3.376,-12.1%204.535,-20.55%204.535,-32.7c0,-10.25%20-0.554,-9.15%206.299,-11.95c3.93,-1.6%204.233,-1.65%2011.338,-1.7c5.694,0%207.911,0.2%2010.078,0.9c5.341,1.7%208.012,2.95%208.264,3.8c0.151,0.45%200.252,4.3%200.202,8.55c-0.05,8.55%200.302,13.15%201.411,19.5c1.26,6.85%204.132,17.4%206.047,22c1.008,2.35%202.066,4.95%202.368,5.75c1.109,3.05%206.349,12.75%209.171,17.05c6.5,9.85%2017.234,21.5%2026.455,28.8c22.626,17.8%2048.123,26.7%2076.342,26.6c28.37,-0.1%2053.263,-8.8%2075.788,-26.6c12.598,-9.95%2025.851,-25.95%2031.696,-38.25c0.257,-0.524%200.514,-1.016%200.755,-1.448c0.61,-1.095%201.116,-1.809%201.261,-1.702c0.022,0.011%200.043,0.868%200.064,2.501Zm-235.541,116.299c4.888,-1.3%2012.195,-4.65%2016.78,-7.7c10.884,-7.15%2020.408,-21.75%2021.114,-32.3c0.202,-3.4%200.101,-4%20-1.209,-6.5c-2.066,-4%20-5.089,-5.75%20-9.927,-5.75c-6.5,0%20-9.474,2.7%20-12.144,11.1c-1.663,5.25%20-4.586,9.55%20-8.768,12.9c-4.334,3.5%20-9.02,5.65%20-14.261,6.55c-9.877,1.8%20-18.846,-0.9%20-26.354,-7.85c-3.981,-3.75%20-5.845,-6.6%20-7.559,-11.7c-1.814,-5.3%20-2.318,-6.25%20-4.737,-8.4c-7.206,-6.45%20-18.695,-1.3%20-18.695,8.35c0,4.9%202.872,12.35%207.407,19.3c7.609,11.6%2019.3,19.45%2033.409,22.55c6.047,1.3%2019.098,1.05%2024.944,-0.55Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20id=%22EyeR%22%20d=%22M650.304,367.663c48.017,0%2087,38.983%2087,87c0,48.017%20-38.983,87%20-87,87c-48.017,0%20-87,-38.983%20-87,-87c0,-48.017%2038.983,-87%2087,-87Zm-25.912,60.475c-16.344,0%20-29.613,13.269%20-29.613,29.613c0,16.344%2013.269,29.613%2029.613,29.613c16.344,0%2029.613,-13.269%2029.613,-29.613c0,-16.344%20-13.269,-29.613%20-29.613,-29.613Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20id=%22EyeL%22%20d=%22M373.961,367.663c-48.017,0%20-87,38.983%20-87,87c0,48.017%2038.983,87%2087,87c48.017,0%2087,-38.983%2087,-87c0,-48.017%20-38.983,-87%20-87,-87Zm25.912,60.475c16.344,0%2029.613,13.269%2029.613,29.613c0,16.344%20-13.269,29.613%20-29.613,29.613c-16.344,0%20-29.613,-13.269%20-29.613,-29.613c0,-16.344%2013.269,-29.613%2029.613,-29.613Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20d=%22M262.527,400.193c-0.499,-24.148%20-0.367,-185.634%200.238,-192.143c1.764,-18.75%2011.338,-35.15%2026.556,-45.45c7.156,-4.85%2014.462,-7.85%2023.785,-9.7c2.671,-0.55%2039.759,-0.65%20199.044,-0.65c186.598,0%20195.971,0.05%20200.254,0.9c25.145,5.1%2043.941,24.15%2048.426,49.1c0.705,4%200.857,15.2%201.008,102.9c0.084,50.591%200.028,85.23%20-0.17,95.14c-0.039,1.951%20-0.083,2.943%20-0.133,2.91c-0.128,-0.076%20-0.527,-0.717%20-1.067,-1.688c-0.526,-0.946%20-1.185,-2.205%20-1.856,-3.562c-2.57,-5.1%20-8.113,-13.5%20-13.051,-19.7c-6.148,-7.75%20-17.838,-18%20-27.564,-24.25c-2.469,-1.6%20-4.938,-3.25%20-5.392,-3.7c-0.504,-0.45%20-1.008,-0.8%20-1.159,-0.8l-0.655,0c-0.252,0%20-0.907,-0.45%20-1.512,-1c-0.605,-0.6%20-1.109,-0.9%20-1.109,-0.75c0,0.15%20-0.655,-0.05%20-1.512,-0.5c-4.334,-2.2%20-16.679,-6.8%20-22.676,-8.4c-10.784,-2.9%20-17.637,-3.9%20-28.723,-4.2c-20.459,-0.55%20-37.793,3.05%20-56.69,11.85c-17.385,8.05%20-34.467,22.25%20-45.352,37.75c-1.361,1.95%20-2.62,3.6%20-2.772,3.75c-0.454,0.4%20-3.023,4.45%20-3.023,4.75c0,0.15%20-0.806,1.55%20-1.764,3.05c-1.965,3%20-4.737,8.75%20-7.055,14.6c-0.504,1.15%20-1.159,2.1%20-1.461,2.1c-0.353,0%20-2.318,-0.6%20-4.384,-1.3c-6.954,-2.4%20-11.691,-3.2%20-19.753,-3.2c-8.365,0%20-14.563,1%20-21.719,3.55c-4.838,1.7%20-4.686,1.7%20-5.341,0.5c-0.252,-0.55%20-0.504,-1.25%20-0.504,-1.55c0,-1.2%20-5.543,-12.8%20-8.315,-17.3c-2.57,-4.2%20-2.57,-4.2%20-8.315,-11.95c-9.171,-12.35%20-23.432,-24.35%20-38.045,-32.1c-15.571,-8.2%20-26.808,-11.7%20-44.798,-13.9c-14.361,-1.75%20-32.401,-0.35%20-45.654,3.6c-19.703,5.85%20-33.359,13.25%20-49.131,26.75c-9.474,8.1%20-20.106,21.6%20-25.901,32.9c-0.553,1.074%20-1.106,2.096%20-1.562,2.913c-0.542,0.97%20-0.949,1.651%20-1.058,1.787c-0.05,0.058%20-0.096,-1.001%20-0.138,-3.007Z%22%20style=%22fill:%23fff;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M307.853,922.65c-18.95,-1.95%20-38.2,-9.85%20-53,-21.8c-8.45,-6.85%20-17.95,-17.4%20-23.2,-25.75c-6.55,-10.45%20-12.25,-27.2%20-13.9,-41.15c-0.5,-4.15%20-0.65,-70.1%20-0.65,-318.95l0,-313.75l1.15,-6.5c2.1,-11.9%204.6,-19.85%209.6,-30.1c5.35,-11.15%2010.45,-18.35%2018.8,-26.95c16.65,-17%2035.55,-26.9%2059.7,-31.3l6.25,-1.15l198.25,0c187.4,0%20198.55,0.05%20204,0.9c24.25,3.75%2043.75,13.35%2060.35,29.85c18.8,18.6%2029,40.75%2031.2,67.9c0.35,4.3%200.45,107.05%200.35,317.6c-0.15,289.65%20-0.25,311.6%20-1,316.35c-1.65,9.75%20-4.9,20%20-9.35,29.4c-2.05,4.25%20-7.5,12.7%20-11.05,17.25c-5.1,6.35%20-13.65,14.45%20-21.1,19.9c-10.3,7.55%20-25.3,14.1%20-38.95,16.95l-6.7,1.4l-204.5,0.05c-112.5,0%20-205.3,-0.05%20-206.25,-0.15Zm-43.794,-513.363l-0.006,0.013c-0.75,1.65%20-2.2,5.55%20-3.25,8.7l-1.9,5.75l-7.15,0.3c-8.55,0.35%20-10.85,1.05%20-14.6,4.5c-6.45,5.9%20-6.75,14.15%20-0.75,20.7c3.45,3.75%206.25,4.9%2012.45,5.25l5.25,0.25l0.35,4c1.4,16.85%203.95,28.2%209.1,41l0.506,1.25l0,314.111c0,35.592%2028.897,64.489%2064.489,64.489l367.091,0c35.592,0%2064.489,-28.897%2064.489,-64.489l0,-315.693l0.525,-1.318c4.8,-11.85%207.7,-25.05%208.5,-38.7l0.3,-4.8l5.3,-0.2c6.35,-0.2%209,-1.2%2012.7,-5c5.9,-6.05%205.75,-13.85%20-0.4,-20.4c-3.6,-3.85%20-6.05,-4.65%20-14.85,-4.9l-7.35,-0.2l-1.3,-4.25c-0.7,-2.35%20-2.2,-6.45%20-3.3,-9.1l-0.125,-0.3l0,-193.266c0,-35.592%20-28.897,-64.489%20-64.489,-64.489l-367.091,0c-35.592,0%20-64.489,28.897%20-64.489,64.489l0,192.303Z%22%20style=%22fill:%230c7b95;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M499.5,627.55c-19,-4.2%20-33.85,-17.7%20-39.5,-35.9c-1.4,-4.55%20-1.4,-10.85%200.05,-13.95c1.9,-4%205.85,-6.15%2011.45,-6.2c4.4,0%206.7,0.7%209.05,2.85c2.4,2.15%202.9,3.1%204.7,8.4c1.7,5.1%203.55,7.95%207.5,11.65c11.25,10.55%2025.3,11.05%2037.3,1.35c4.15,-3.35%207.05,-7.65%208.7,-12.9c1.8,-5.65%203.3,-8.05%206.15,-9.7c2.15,-1.3%202.8,-1.4%207.4,-1.4c4.7,0%205.2,0.1%207.5,1.5c1.85,1.15%202.8,2.2%203.85,4.25c1.35,2.6%201.4,3%201.2,8c-0.25,6%20-1.5,9.95%20-4.95,16.1c-3.75,6.7%20-10.25,13.9%20-16,17.7c-4.5,3%20-11.8,6.4%20-16.65,7.7c-5.8,1.6%20-21.55,1.9%20-27.75,0.55Z%22%20style=%22fill:%23252223;fill-rule:nonzero;%22/%3E%3Ccircle%20cx=%22399.115%22%20cy=%22457.606%22%20r=%2230.5%22%20style=%22fill:%23252223;%22/%3E%3Ccircle%20cx=%22625.06%22%20cy=%22457.672%22%20r=%2230.5%22%20style=%22fill:%23252223;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M251.227,456.177l-3.727,-0.177c-2.168,-0.122%20-3.92,-0.343%20-5.429,-0.737c-2.716,-0.667%20-4.641,-1.951%20-6.989,-4.363c-3.124,-3.217%20-4.378,-6.435%20-4.331,-11.315l-0.001,-0.335c0,-5.75%201.25,-8.75%205.05,-12.2c0.438,-0.403%200.856,-0.768%201.266,-1.1c2.298,-2.002%204.59,-2.801%209.145,-3.152c1.211,-0.106%202.591,-0.183%204.188,-0.249l5.118,-0.215c14.21,-52.224%2062.001,-90.672%20118.7,-90.672c52.202,0%2096.852,32.59%20114.697,78.517l2.117,-0.73c6.4,-2.25%2010.95,-2.95%2020.3,-2.95l0.759,0.002l0.759,-0.002c9.35,0%2013.9,0.7%2020.3,2.95l2.341,0.807c17.825,-45.967%2062.496,-78.594%20114.727,-78.594c56.704,0%20104.497,38.453%20118.703,90.683l4.861,0.204c1.598,0.065%202.977,0.143%204.188,0.249c4.555,0.351%206.847,1.15%209.145,3.152c0.411,0.332%200.829,0.697%201.266,1.1c3.8,3.45%205.05,6.45%205.05,12.2l-0.001,0.335c0.048,4.88%20-1.207,8.097%20-4.331,11.315c-2.348,2.411%20-4.273,3.695%20-6.989,4.363c-1.51,0.395%20-3.262,0.615%20-5.429,0.737l-3.473,0.165c-0.806,67.195%20-55.607,121.498%20-122.991,121.498c-67.886,0%20-123,-55.114%20-123,-123c0,-2.528%200.076,-5.037%200.227,-7.527c-0.076,-0.062%20-2.648,-1.211%20-5.013,-2.185c-3.917,-1.402%20-5.893,-1.679%20-10.341,-1.699c-4.448,0.021%20-6.424,0.298%20-10.341,1.699c-2.366,0.974%20-3.842,1.476%20-4.761,2.148c0.152,2.502%200.229,5.024%200.229,7.565c0,67.886%20-55.114,123%20-123,123c-67.38,0%20-122.178,-54.297%20-122.991,-121.486Zm398.991,-87.614c-47.52,0%20-86.1,38.58%20-86.1,86.1c0,47.52%2038.58,86.1%2086.1,86.1c47.52,0%2086.1,-38.58%2086.1,-86.1c0,-47.52%20-38.58,-86.1%20-86.1,-86.1Zm-276,0c-47.52,0%20-86.1,38.58%20-86.1,86.1c0,47.52%2038.58,86.1%2086.1,86.1c47.52,0%2086.1,-38.58%2086.1,-86.1c0,-47.52%20-38.58,-86.1%20-86.1,-86.1Z%22%20style=%22fill:%23f7c528;%22/%3E%3C/g%3E%3C/svg%3E">
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml;charset=utf8,%3Csvg%20width=%22100%25%22%20height=%22100%25%22%20viewBox=%220%200%201024%201024%22%20version=%221.1%22%20xmlns=%22http://www.w3.org/2000/svg%22%20xmlns:xlink=%22http://www.w3.org/1999/xlink%22%20xml:space=%22preserve%22%20xmlns:serif=%22http://www.serif.com/%22%20style=%22fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;%22%3E%3Cg%3E%3Cpath%20d=%22M0.3,223.541c6.053,-120.578%20102.966,-217.381%20223.59,-223.258c29.257,-0.211%20121.185,-0.255%20290.11,-0.133l287.293,0.193c119.688,6.43%20215.755,102.394%20222.346,222.039c0.183,29.827%200.304,102.451%200.361,187.005l0,230.798c-0.052,73.687%20-0.159,134.842%20-0.321,160.685c-3.156,60.776%20-29.397,115.486%20-70.113,155.521c-17.507,17.036%20-38.269,31.935%20-59.316,42.458c-4.404,2.202%20-8.661,4.225%20-12.839,6.078c-25.004,10.761%20-52.239,17.314%20-80.811,18.765c-35.26,0.179%20-138.366,0.307%20-288.649,0.307c-159.017,0%20-255.257,-0.094%20-288.524,-0.306c-35.338,-1.791%20-68.632,-11.386%20-98.19,-27.095c-11.727,-6.273%20-22.924,-13.509%20-33.236,-21.549c-19.403,-15.091%20-36.538,-33.169%20-50.363,-52.891c-24.308,-35.172%20-39.297,-77.267%20-41.386,-122.705l0.048,-288.454l0,-287.459Zm723.65,696.309c13.65,-2.85%2028.65,-9.4%2038.95,-16.95c22.95,-16.8%2036.95,-39.3%2041.5,-66.55c0.75,-4.75%200.85,-26.6%201,-314.85c0.1,-209.55%200,-311.8%20-0.35,-316.1c-2.2,-27.15%20-12.4,-49.3%20-31.2,-67.9c-16.6,-16.5%20-36.1,-26.1%20-60.35,-29.85c-5.45,-0.85%20-16.5,-0.9%20-202.5,-0.9l-196.75,0l-6.25,1.15c-24.15,4.4%20-43.05,14.3%20-59.7,31.3c-8.35,8.6%20-13.45,15.8%20-18.8,26.95c-5,10.25%20-7.5,18.2%20-9.6,30.1l-1.15,6.5l0,312.25c0,247.6%200.15,313.3%200.65,317.45c1.65,13.95%207.35,30.7%2013.9,41.15c5.25,8.35%2014.75,18.9%2023.2,25.75c14.8,11.95%2034.05,19.85%2053,21.8c0.95,0.1%2093.1,0.15%20204.75,0.15l203,-0.05l6.7,-1.4Z%22%20style=%22fill:%235ac4d0;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M761.549,509.201c0.168,13.397%200.284,78.976%200.239,157.149c-0.101,145.8%20-0.151,159.8%20-0.907,163.9c-3.074,16.55%20-12.447,30.75%20-26.304,39.9c-8.315,5.5%20-16.226,8.6%20-25.196,9.85c-4.283,0.6%20-372.289,1.05%20-387.205,0.45c-13.001,-0.5%20-22.626,-3.65%20-33.006,-10.85c-14.865,-10.3%20-24.49,-26.4%20-26.455,-44.2c-0.664,-6.307%20-0.703,-283.933%20-0.117,-316.118c0.037,-2.006%200.076,-3.059%200.117,-3.032c0.162,0.107%200.542,0.661%201.008,1.453c0.402,0.683%200.867,1.544%201.31,2.447c5.14,10.15%2012.043,19.5%2020.761,28.2c21.97,21.95%2048.678,34.15%2079.063,36.15c22.525,1.5%2046.259,-3.65%2065.659,-14.25c22.525,-12.35%2041.169,-31.75%2052.004,-54.25c3.779,-7.8%205.039,-11.1%206.954,-17.9c3.376,-12.1%204.535,-20.55%204.535,-32.7c0,-10.25%20-0.554,-9.15%206.299,-11.95c3.93,-1.6%204.233,-1.65%2011.338,-1.7c5.694,0%207.911,0.2%2010.078,0.9c5.341,1.7%208.012,2.95%208.264,3.8c0.151,0.45%200.252,4.3%200.202,8.55c-0.05,8.55%200.302,13.15%201.411,19.5c1.26,6.85%204.132,17.4%206.047,22c1.008,2.35%202.066,4.95%202.368,5.75c1.109,3.05%206.349,12.75%209.171,17.05c6.5,9.85%2017.234,21.5%2026.455,28.8c22.626,17.8%2048.123,26.7%2076.342,26.6c28.37,-0.1%2053.263,-8.8%2075.788,-26.6c12.598,-9.95%2025.851,-25.95%2031.696,-38.25c0.257,-0.524%200.514,-1.016%200.755,-1.448c0.61,-1.095%201.116,-1.809%201.261,-1.702c0.022,0.011%200.043,0.868%200.064,2.501Zm-235.541,116.299c4.888,-1.3%2012.195,-4.65%2016.78,-7.7c10.884,-7.15%2020.408,-21.75%2021.114,-32.3c0.202,-3.4%200.101,-4%20-1.209,-6.5c-2.066,-4%20-5.089,-5.75%20-9.927,-5.75c-6.5,0%20-9.474,2.7%20-12.144,11.1c-1.663,5.25%20-4.586,9.55%20-8.768,12.9c-4.334,3.5%20-9.02,5.65%20-14.261,6.55c-9.877,1.8%20-18.846,-0.9%20-26.354,-7.85c-3.981,-3.75%20-5.845,-6.6%20-7.559,-11.7c-1.814,-5.3%20-2.318,-6.25%20-4.737,-8.4c-7.206,-6.45%20-18.695,-1.3%20-18.695,8.35c0,4.9%202.872,12.35%207.407,19.3c7.609,11.6%2019.3,19.45%2033.409,22.55c6.047,1.3%2019.098,1.05%2024.944,-0.55Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20id=%22EyeR%22%20d=%22M650.304,367.663c48.017,0%2087,38.983%2087,87c0,48.017%20-38.983,87%20-87,87c-48.017,0%20-87,-38.983%20-87,-87c0,-48.017%2038.983,-87%2087,-87Zm-25.912,60.475c-16.344,0%20-29.613,13.269%20-29.613,29.613c0,16.344%2013.269,29.613%2029.613,29.613c16.344,0%2029.613,-13.269%2029.613,-29.613c0,-16.344%20-13.269,-29.613%20-29.613,-29.613Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20id=%22EyeL%22%20d=%22M373.961,367.663c-48.017,0%20-87,38.983%20-87,87c0,48.017%2038.983,87%2087,87c48.017,0%2087,-38.983%2087,-87c0,-48.017%20-38.983,-87%20-87,-87Zm25.912,60.475c16.344,0%2029.613,13.269%2029.613,29.613c0,16.344%20-13.269,29.613%20-29.613,29.613c-16.344,0%20-29.613,-13.269%20-29.613,-29.613c0,-16.344%2013.269,-29.613%2029.613,-29.613Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20d=%22M262.527,400.193c-0.499,-24.148%20-0.367,-185.634%200.238,-192.143c1.764,-18.75%2011.338,-35.15%2026.556,-45.45c7.156,-4.85%2014.462,-7.85%2023.785,-9.7c2.671,-0.55%2039.759,-0.65%20199.044,-0.65c186.598,0%20195.971,0.05%20200.254,0.9c25.145,5.1%2043.941,24.15%2048.426,49.1c0.705,4%200.857,15.2%201.008,102.9c0.084,50.591%200.028,85.23%20-0.17,95.14c-0.039,1.951%20-0.083,2.943%20-0.133,2.91c-0.128,-0.076%20-0.527,-0.717%20-1.067,-1.688c-0.526,-0.946%20-1.185,-2.205%20-1.856,-3.562c-2.57,-5.1%20-8.113,-13.5%20-13.051,-19.7c-6.148,-7.75%20-17.838,-18%20-27.564,-24.25c-2.469,-1.6%20-4.938,-3.25%20-5.392,-3.7c-0.504,-0.45%20-1.008,-0.8%20-1.159,-0.8l-0.655,0c-0.252,0%20-0.907,-0.45%20-1.512,-1c-0.605,-0.6%20-1.109,-0.9%20-1.109,-0.75c0,0.15%20-0.655,-0.05%20-1.512,-0.5c-4.334,-2.2%20-16.679,-6.8%20-22.676,-8.4c-10.784,-2.9%20-17.637,-3.9%20-28.723,-4.2c-20.459,-0.55%20-37.793,3.05%20-56.69,11.85c-17.385,8.05%20-34.467,22.25%20-45.352,37.75c-1.361,1.95%20-2.62,3.6%20-2.772,3.75c-0.454,0.4%20-3.023,4.45%20-3.023,4.75c0,0.15%20-0.806,1.55%20-1.764,3.05c-1.965,3%20-4.737,8.75%20-7.055,14.6c-0.504,1.15%20-1.159,2.1%20-1.461,2.1c-0.353,0%20-2.318,-0.6%20-4.384,-1.3c-6.954,-2.4%20-11.691,-3.2%20-19.753,-3.2c-8.365,0%20-14.563,1%20-21.719,3.55c-4.838,1.7%20-4.686,1.7%20-5.341,0.5c-0.252,-0.55%20-0.504,-1.25%20-0.504,-1.55c0,-1.2%20-5.543,-12.8%20-8.315,-17.3c-2.57,-4.2%20-2.57,-4.2%20-8.315,-11.95c-9.171,-12.35%20-23.432,-24.35%20-38.045,-32.1c-15.571,-8.2%20-26.808,-11.7%20-44.798,-13.9c-14.361,-1.75%20-32.401,-0.35%20-45.654,3.6c-19.703,5.85%20-33.359,13.25%20-49.131,26.75c-9.474,8.1%20-20.106,21.6%20-25.901,32.9c-0.553,1.074%20-1.106,2.096%20-1.562,2.913c-0.542,0.97%20-0.949,1.651%20-1.058,1.787c-0.05,0.058%20-0.096,-1.001%20-0.138,-3.007Z%22%20style=%22fill:%23fff;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M307.853,922.65c-18.95,-1.95%20-38.2,-9.85%20-53,-21.8c-8.45,-6.85%20-17.95,-17.4%20-23.2,-25.75c-6.55,-10.45%20-12.25,-27.2%20-13.9,-41.15c-0.5,-4.15%20-0.65,-70.1%20-0.65,-318.95l0,-313.75l1.15,-6.5c2.1,-11.9%204.6,-19.85%209.6,-30.1c5.35,-11.15%2010.45,-18.35%2018.8,-26.95c16.65,-17%2035.55,-26.9%2059.7,-31.3l6.25,-1.15l198.25,0c187.4,0%20198.55,0.05%20204,0.9c24.25,3.75%2043.75,13.35%2060.35,29.85c18.8,18.6%2029,40.75%2031.2,67.9c0.35,4.3%200.45,107.05%200.35,317.6c-0.15,289.65%20-0.25,311.6%20-1,316.35c-1.65,9.75%20-4.9,20%20-9.35,29.4c-2.05,4.25%20-7.5,12.7%20-11.05,17.25c-5.1,6.35%20-13.65,14.45%20-21.1,19.9c-10.3,7.55%20-25.3,14.1%20-38.95,16.95l-6.7,1.4l-204.5,0.05c-112.5,0%20-205.3,-0.05%20-206.25,-0.15Zm-43.794,-513.363l-0.006,0.013c-0.75,1.65%20-2.2,5.55%20-3.25,8.7l-1.9,5.75l-7.15,0.3c-8.55,0.35%20-10.85,1.05%20-14.6,4.5c-6.45,5.9%20-6.75,14.15%20-0.75,20.7c3.45,3.75%206.25,4.9%2012.45,5.25l5.25,0.25l0.35,4c1.4,16.85%203.95,28.2%209.1,41l0.506,1.25l0,314.111c0,35.592%2028.897,64.489%2064.489,64.489l367.091,0c35.592,0%2064.489,-28.897%2064.489,-64.489l0,-315.693l0.525,-1.318c4.8,-11.85%207.7,-25.05%208.5,-38.7l0.3,-4.8l5.3,-0.2c6.35,-0.2%209,-1.2%2012.7,-5c5.9,-6.05%205.75,-13.85%20-0.4,-20.4c-3.6,-3.85%20-6.05,-4.65%20-14.85,-4.9l-7.35,-0.2l-1.3,-4.25c-0.7,-2.35%20-2.2,-6.45%20-3.3,-9.1l-0.125,-0.3l0,-193.266c0,-35.592%20-28.897,-64.489%20-64.489,-64.489l-367.091,0c-35.592,0%20-64.489,28.897%20-64.489,64.489l0,192.303Z%22%20style=%22fill:%230c7b95;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M499.5,627.55c-19,-4.2%20-33.85,-17.7%20-39.5,-35.9c-1.4,-4.55%20-1.4,-10.85%200.05,-13.95c1.9,-4%205.85,-6.15%2011.45,-6.2c4.4,0%206.7,0.7%209.05,2.85c2.4,2.15%202.9,3.1%204.7,8.4c1.7,5.1%203.55,7.95%207.5,11.65c11.25,10.55%2025.3,11.05%2037.3,1.35c4.15,-3.35%207.05,-7.65%208.7,-12.9c1.8,-5.65%203.3,-8.05%206.15,-9.7c2.15,-1.3%202.8,-1.4%207.4,-1.4c4.7,0%205.2,0.1%207.5,1.5c1.85,1.15%202.8,2.2%203.85,4.25c1.35,2.6%201.4,3%201.2,8c-0.25,6%20-1.5,9.95%20-4.95,16.1c-3.75,6.7%20-10.25,13.9%20-16,17.7c-4.5,3%20-11.8,6.4%20-16.65,7.7c-5.8,1.6%20-21.55,1.9%20-27.75,0.55Z%22%20style=%22fill:%23252223;fill-rule:nonzero;%22/%3E%3Ccircle%20cx=%22399.115%22%20cy=%22457.606%22%20r=%2230.5%22%20style=%22fill:%23252223;%22/%3E%3Ccircle%20cx=%22625.06%22%20cy=%22457.672%22%20r=%2230.5%22%20style=%22fill:%23252223;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M251.227,456.177l-3.727,-0.177c-2.168,-0.122%20-3.92,-0.343%20-5.429,-0.737c-2.716,-0.667%20-4.641,-1.951%20-6.989,-4.363c-3.124,-3.217%20-4.378,-6.435%20-4.331,-11.315l-0.001,-0.335c0,-5.75%201.25,-8.75%205.05,-12.2c0.438,-0.403%200.856,-0.768%201.266,-1.1c2.298,-2.002%204.59,-2.801%209.145,-3.152c1.211,-0.106%202.591,-0.183%204.188,-0.249l5.118,-0.215c14.21,-52.224%2062.001,-90.672%20118.7,-90.672c52.202,0%2096.852,32.59%20114.697,78.517l2.117,-0.73c6.4,-2.25%2010.95,-2.95%2020.3,-2.95l0.759,0.002l0.759,-0.002c9.35,0%2013.9,0.7%2020.3,2.95l2.341,0.807c17.825,-45.967%2062.496,-78.594%20114.727,-78.594c56.704,0%20104.497,38.453%20118.703,90.683l4.861,0.204c1.598,0.065%202.977,0.143%204.188,0.249c4.555,0.351%206.847,1.15%209.145,3.152c0.411,0.332%200.829,0.697%201.266,1.1c3.8,3.45%205.05,6.45%205.05,12.2l-0.001,0.335c0.048,4.88%20-1.207,8.097%20-4.331,11.315c-2.348,2.411%20-4.273,3.695%20-6.989,4.363c-1.51,0.395%20-3.262,0.615%20-5.429,0.737l-3.473,0.165c-0.806,67.195%20-55.607,121.498%20-122.991,121.498c-67.886,0%20-123,-55.114%20-123,-123c0,-2.528%200.076,-5.037%200.227,-7.527c-0.076,-0.062%20-2.648,-1.211%20-5.013,-2.185c-3.917,-1.402%20-5.893,-1.679%20-10.341,-1.699c-4.448,0.021%20-6.424,0.298%20-10.341,1.699c-2.366,0.974%20-3.842,1.476%20-4.761,2.148c0.152,2.502%200.229,5.024%200.229,7.565c0,67.886%20-55.114,123%20-123,123c-67.38,0%20-122.178,-54.297%20-122.991,-121.486Zm398.991,-87.614c-47.52,0%20-86.1,38.58%20-86.1,86.1c0,47.52%2038.58,86.1%2086.1,86.1c47.52,0%2086.1,-38.58%2086.1,-86.1c0,-47.52%20-38.58,-86.1%20-86.1,-86.1Zm-276,0c-47.52,0%20-86.1,38.58%20-86.1,86.1c0,47.52%2038.58,86.1%2086.1,86.1c47.52,0%2086.1,-38.58%2086.1,-86.1c0,-47.52%20-38.58,-86.1%20-86.1,-86.1Z%22%20style=%22fill:%23f7c528;%22/%3E%3C/g%3E%3C/svg%3E">
    <style>
        /* =========================================
           RESET & VARIABLES
           ========================================= */
        :root {
            /* Light Mode Defaults */
            --primary: #1CB0F6;
            --primary-shadow: #1899D6;
            --success: #58CC02;
            --success-shadow: #46A302;
            --error: #FF4B4B;
            --error-shadow: #D40000;
            
            --neutral: #E5E5E5;
            --neutral-dark: #AFAFAF;
            
            --text-main: #4B4B4B;
            --text-light: #777777;
            
            --bg-body: #FEFEFE;
            --bg-surface: #FFFFFF;
            --input-bg: #F7F7F7;
            --info-box-bg: #F0F6FF;
            --info-box-border: #DCE6F5;
            --stats-bg: #F7F7F7;
            
            --border-color: #E5E5E5;
            
            --card-radius: 20px;
            --btn-radius: 16px;
        }

        /* Dark Mode Overrides */
        [data-theme="dark"] {
            --primary: #1CB0F6;
            --primary-shadow: #1899D6;
            
            --text-main: #FFFFFF;
            --text-light: #DCE6F5;
            
            --bg-body: #131F24;
            --bg-surface: #202F36;
            --input-bg: #131F24;
            --info-box-bg: #202F36;
            --info-box-border: #37464F;
            --stats-bg: #131F24;
            
            --border-color: #37464F;
            --neutral: #37464F;
            --neutral-dark: #52656d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }

        body {
            font-family: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            line-height: 1.5;
        }

        /* =========================================
           MAIN CONTAINER
           ========================================= */
        .container {
            background: var(--bg-surface);
            border: 2px solid var(--border-color);
            border-radius: var(--card-radius);
            box-shadow: 0 4px 0 var(--border-color); 
            padding: 40px;
            max-width: 600px;
            width: 100%;
            position: relative;
        }

        /* =========================================
           HEADER & LOGO (Enhanced Flex Layout)
           ========================================= */
        .header-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            gap: 15px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            display: inline-block; 
            width: 48px; 
            height: 48px;
            background-repeat: no-repeat;
            background-size: contain; 
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg%20width=%22100%25%22%20height=%22100%25%22%20viewBox=%220%200%201024%201024%22%20version=%221.1%22%20xmlns=%22http://www.w3.org/2000/svg%22%20xmlns:xlink=%22http://www.w3.org/1999/xlink%22%20xml:space=%22preserve%22%20xmlns:serif=%22http://www.serif.com/%22%20style=%22fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;%22%3E%3Cg%3E%3Cpath%20d=%22M0.3,223.541c6.053,-120.578%20102.966,-217.381%20223.59,-223.258c29.257,-0.211%20121.185,-0.255%20290.11,-0.133l287.293,0.193c119.688,6.43%20215.755,102.394%20222.346,222.039c0.183,29.827%200.304,102.451%200.361,187.005l0,230.798c-0.052,73.687%20-0.159,134.842%20-0.321,160.685c-3.156,60.776%20-29.397,115.486%20-70.113,155.521c-17.507,17.036%20-38.269,31.935%20-59.316,42.458c-4.404,2.202%20-8.661,4.225%20-12.839,6.078c-25.004,10.761%20-52.239,17.314%20-80.811,18.765c-35.26,0.179%20-138.366,0.307%20-288.649,0.307c-159.017,0%20-255.257,-0.094%20-288.524,-0.306c-35.338,-1.791%20-68.632,-11.386%20-98.19,-27.095c-11.727,-6.273%20-22.924,-13.509%20-33.236,-21.549c-19.403,-15.091%20-36.538,-33.169%20-50.363,-52.891c-24.308,-35.172%20-39.297,-77.267%20-41.386,-122.705l0.048,-288.454l0,-287.459Zm723.65,696.309c13.65,-2.85%2028.65,-9.4%2038.95,-16.95c22.95,-16.8%2036.95,-39.3%2041.5,-66.55c0.75,-4.75%200.85,-26.6%201,-314.85c0.1,-209.55%200,-311.8%20-0.35,-316.1c-2.2,-27.15%20-12.4,-49.3%20-31.2,-67.9c-16.6,-16.5%20-36.1,-26.1%20-60.35,-29.85c-5.45,-0.85%20-16.5,-0.9%20-202.5,-0.9l-196.75,0l-6.25,1.15c-24.15,4.4%20-43.05,14.3%20-59.7,31.3c-8.35,8.6%20-13.45,15.8%20-18.8,26.95c-5,10.25%20-7.5,18.2%20-9.6,30.1l-1.15,6.5l0,312.25c0,247.6%200.15,313.3%200.65,317.45c1.65,13.95%207.35,30.7%2013.9,41.15c5.25,8.35%2014.75,18.9%2023.2,25.75c14.8,11.95%2034.05,19.85%2053,21.8c0.95,0.1%2093.1,0.15%20204.75,0.15l203,-0.05l6.7,-1.4Z%22%20style=%22fill:%235ac4d0;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M761.549,509.201c0.168,13.397%200.284,78.976%200.239,157.149c-0.101,145.8%20-0.151,159.8%20-0.907,163.9c-3.074,16.55%20-12.447,30.75%20-26.304,39.9c-8.315,5.5%20-16.226,8.6%20-25.196,9.85c-4.283,0.6%20-372.289,1.05%20-387.205,0.45c-13.001,-0.5%20-22.626,-3.65%20-33.006,-10.85c-14.865,-10.3%20-24.49,-26.4%20-26.455,-44.2c-0.664,-6.307%20-0.703,-283.933%20-0.117,-316.118c0.037,-2.006%200.076,-3.059%200.117,-3.032c0.162,0.107%200.542,0.661%201.008,1.453c0.402,0.683%200.867,1.544%201.31,2.447c5.14,10.15%2012.043,19.5%2020.761,28.2c21.97,21.95%2048.678,34.15%2079.063,36.15c22.525,1.5%2046.259,-3.65%2065.659,-14.25c22.525,-12.35%2041.169,-31.75%2052.004,-54.25c3.779,-7.8%205.039,-11.1%206.954,-17.9c3.376,-12.1%204.535,-20.55%204.535,-32.7c0,-10.25%20-0.554,-9.15%206.299,-11.95c3.93,-1.6%204.233,-1.65%2011.338,-1.7c5.694,0%207.911,0.2%2010.078,0.9c5.341,1.7%208.012,2.95%208.264,3.8c0.151,0.45%200.252,4.3%200.202,8.55c-0.05,8.55%200.302,13.15%201.411,19.5c1.26,6.85%204.132,17.4%206.047,22c1.008,2.35%202.066,4.95%202.368,5.75c1.109,3.05%206.349,12.75%209.171,17.05c6.5,9.85%2017.234,21.5%2026.455,28.8c22.626,17.8%2048.123,26.7%2076.342,26.6c28.37,-0.1%2053.263,-8.8%2075.788,-26.6c12.598,-9.95%2025.851,-25.95%2031.696,-38.25c0.257,-0.524%200.514,-1.016%200.755,-1.448c0.61,-1.095%201.116,-1.809%201.261,-1.702c0.022,0.011%200.043,0.868%200.064,2.501Zm-235.541,116.299c4.888,-1.3%2012.195,-4.65%2016.78,-7.7c10.884,-7.15%2020.408,-21.75%2021.114,-32.3c0.202,-3.4%200.101,-4%20-1.209,-6.5c-2.066,-4%20-5.089,-5.75%20-9.927,-5.75c-6.5,0%20-9.474,2.7%20-12.144,11.1c-1.663,5.25%20-4.586,9.55%20-8.768,12.9c-4.334,3.5%20-9.02,5.65%20-14.261,6.55c-9.877,1.8%20-18.846,-0.9%20-26.354,-7.85c-3.981,-3.75%20-5.845,-6.6%20-7.559,-11.7c-1.814,-5.3%20-2.318,-6.25%20-4.737,-8.4c-7.206,-6.45%20-18.695,-1.3%20-18.695,8.35c0,4.9%202.872,12.35%207.407,19.3c7.609,11.6%2019.3,19.45%2033.409,22.55c6.047,1.3%2019.098,1.05%2024.944,-0.55Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20id=%22EyeR%22%20d=%22M650.304,367.663c48.017,0%2087,38.983%2087,87c0,48.017%20-38.983,87%20-87,87c-48.017,0%20-87,-38.983%20-87,-87c0,-48.017%2038.983,-87%2087,-87Zm-25.912,60.475c-16.344,0%20-29.613,13.269%20-29.613,29.613c0,16.344%2013.269,29.613%2029.613,29.613c16.344,0%2029.613,-13.269%2029.613,-29.613c0,-16.344%20-13.269,-29.613%20-29.613,-29.613Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20id=%22EyeL%22%20d=%22M373.961,367.663c-48.017,0%20-87,38.983%20-87,87c0,48.017%2038.983,87%2087,87c48.017,0%2087,-38.983%2087,-87c0,-48.017%20-38.983,-87%20-87,-87Zm25.912,60.475c16.344,0%2029.613,13.269%2029.613,29.613c0,16.344%20-13.269,29.613%20-29.613,29.613c-16.344,0%20-29.613,-13.269%20-29.613,-29.613c0,-16.344%2013.269,-29.613%2029.613,-29.613Z%22%20style=%22fill:%23fff;%22/%3E%3Cpath%20d=%22M262.527,400.193c-0.499,-24.148%20-0.367,-185.634%200.238,-192.143c1.764,-18.75%2011.338,-35.15%2026.556,-45.45c7.156,-4.85%2014.462,-7.85%2023.785,-9.7c2.671,-0.55%2039.759,-0.65%20199.044,-0.65c186.598,0%20195.971,0.05%20200.254,0.9c25.145,5.1%2043.941,24.15%2048.426,49.1c0.705,4%200.857,15.2%201.008,102.9c0.084,50.591%200.028,85.23%20-0.17,95.14c-0.039,1.951%20-0.083,2.943%20-0.133,2.91c-0.128,-0.076%20-0.527,-0.717%20-1.067,-1.688c-0.526,-0.946%20-1.185,-2.205%20-1.856,-3.562c-2.57,-5.1%20-8.113,-13.5%20-13.051,-19.7c-6.148,-7.75%20-17.838,-18%20-27.564,-24.25c-2.469,-1.6%20-4.938,-3.25%20-5.392,-3.7c-0.504,-0.45%20-1.008,-0.8%20-1.159,-0.8l-0.655,0c-0.252,0%20-0.907,-0.45%20-1.512,-1c-0.605,-0.6%20-1.109,-0.9%20-1.109,-0.75c0,0.15%20-0.655,-0.05%20-1.512,-0.5c-4.334,-2.2%20-16.679,-6.8%20-22.676,-8.4c-10.784,-2.9%20-17.637,-3.9%20-28.723,-4.2c-20.459,-0.55%20-37.793,3.05%20-56.69,11.85c-17.385,8.05%20-34.467,22.25%20-45.352,37.75c-1.361,1.95%20-2.62,3.6%20-2.772,3.75c-0.454,0.4%20-3.023,4.45%20-3.023,4.75c0,0.15%20-0.806,1.55%20-1.764,3.05c-1.965,3%20-4.737,8.75%20-7.055,14.6c-0.504,1.15%20-1.159,2.1%20-1.461,2.1c-0.353,0%20-2.318,-0.6%20-4.384,-1.3c-6.954,-2.4%20-11.691,-3.2%20-19.753,-3.2c-8.365,0%20-14.563,1%20-21.719,3.55c-4.838,1.7%20-4.686,1.7%20-5.341,0.5c-0.252,-0.55%20-0.504,-1.25%20-0.504,-1.55c0,-1.2%20-5.543,-12.8%20-8.315,-17.3c-2.57,-4.2%20-2.57,-4.2%20-8.315,-11.95c-9.171,-12.35%20-23.432,-24.35%20-38.045,-32.1c-15.571,-8.2%20-26.808,-11.7%20-44.798,-13.9c-14.361,-1.75%20-32.401,-0.35%20-45.654,3.6c-19.703,5.85%20-33.359,13.25%20-49.131,26.75c-9.474,8.1%20-20.106,21.6%20-25.901,32.9c-0.553,1.074%20-1.106,2.096%20-1.562,2.913c-0.542,0.97%20-0.949,1.651%20-1.058,1.787c-0.05,0.058%20-0.096,-1.001%20-0.138,-3.007Z%22%20style=%22fill:%23fff;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M307.853,922.65c-18.95,-1.95%20-38.2,-9.85%20-53,-21.8c-8.45,-6.85%20-17.95,-17.4%20-23.2,-25.75c-6.55,-10.45%20-12.25,-27.2%20-13.9,-41.15c-0.5,-4.15%20-0.65,-70.1%20-0.65,-318.95l0,-313.75l1.15,-6.5c2.1,-11.9%204.6,-19.85%209.6,-30.1c5.35,-11.15%2010.45,-18.35%2018.8,-26.95c16.65,-17%2035.55,-26.9%2059.7,-31.3l6.25,-1.15l198.25,0c187.4,0%20198.55,0.05%20204,0.9c24.25,3.75%2043.75,13.35%2060.35,29.85c18.8,18.6%2029,40.75%2031.2,67.9c0.35,4.3%200.45,107.05%200.35,317.6c-0.15,289.65%20-0.25,311.6%20-1,316.35c-1.65,9.75%20-4.9,20%20-9.35,29.4c-2.05,4.25%20-7.5,12.7%20-11.05,17.25c-5.1,6.35%20-13.65,14.45%20-21.1,19.9c-10.3,7.55%20-25.3,14.1%20-38.95,16.95l-6.7,1.4l-204.5,0.05c-112.5,0%20-205.3,-0.05%20-206.25,-0.15Zm-43.794,-513.363l-0.006,0.013c-0.75,1.65%20-2.2,5.55%20-3.25,8.7l-1.9,5.75l-7.15,0.3c-8.55,0.35%20-10.85,1.05%20-14.6,4.5c-6.45,5.9%20-6.75,14.15%20-0.75,20.7c3.45,3.75%206.25,4.9%2012.45,5.25l5.25,0.25l0.35,4c1.4,16.85%203.95,28.2%209.1,41l0.506,1.25l0,314.111c0,35.592%2028.897,64.489%2064.489,64.489l367.091,0c35.592,0%2064.489,-28.897%2064.489,-64.489l0,-315.693l0.525,-1.318c4.8,-11.85%207.7,-25.05%208.5,-38.7l0.3,-4.8l5.3,-0.2c6.35,-0.2%209,-1.2%2012.7,-5c5.9,-6.05%205.75,-13.85%20-0.4,-20.4c-3.6,-3.85%20-6.05,-4.65%20-14.85,-4.9l-7.35,-0.2l-1.3,-4.25c-0.7,-2.35%20-2.2,-6.45%20-3.3,-9.1l-0.125,-0.3l0,-193.266c0,-35.592%20-28.897,-64.489%20-64.489,-64.489l-367.091,0c-35.592,0%20-64.489,28.897%20-64.489,64.489l0,192.303Z%22%20style=%22fill:%230c7b95;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M499.5,627.55c-19,-4.2%20-33.85,-17.7%20-39.5,-35.9c-1.4,-4.55%20-1.4,-10.85%200.05,-13.95c1.9,-4%205.85,-6.15%2011.45,-6.2c4.4,0%206.7,0.7%209.05,2.85c2.4,2.15%202.9,3.1%204.7,8.4c1.7,5.1%203.55,7.95%207.5,11.65c11.25,10.55%2025.3,11.05%2037.3,1.35c4.15,-3.35%207.05,-7.65%208.7,-12.9c1.8,-5.65%203.3,-8.05%206.15,-9.7c2.15,-1.3%202.8,-1.4%207.4,-1.4c4.7,0%205.2,0.1%207.5,1.5c1.85,1.15%202.8,2.2%203.85,4.25c1.35,2.6%201.4,3%201.2,8c-0.25,6%20-1.5,9.95%20-4.95,16.1c-3.75,6.7%20-10.25,13.9%20-16,17.7c-4.5,3%20-11.8,6.4%20-16.65,7.7c-5.8,1.6%20-21.55,1.9%20-27.75,0.55Z%22%20style=%22fill:%23252223;fill-rule:nonzero;%22/%3E%3Ccircle%20cx=%22399.115%22%20cy=%22457.606%22%20r=%2230.5%22%20style=%22fill:%23252223;%22/%3E%3Ccircle%20cx=%22625.06%22%20cy=%22457.672%22%20r=%2230.5%22%20style=%22fill:%23252223;%22/%3E%3C/g%3E%3Cg%3E%3Cpath%20d=%22M251.227,456.177l-3.727,-0.177c-2.168,-0.122%20-3.92,-0.343%20-5.429,-0.737c-2.716,-0.667%20-4.641,-1.951%20-6.989,-4.363c-3.124,-3.217%20-4.378,-6.435%20-4.331,-11.315l-0.001,-0.335c0,-5.75%201.25,-8.75%205.05,-12.2c0.438,-0.403%200.856,-0.768%201.266,-1.1c2.298,-2.002%204.59,-2.801%209.145,-3.152c1.211,-0.106%202.591,-0.183%204.188,-0.249l5.118,-0.215c14.21,-52.224%2062.001,-90.672%20118.7,-90.672c52.202,0%2096.852,32.59%20114.697,78.517l2.117,-0.73c6.4,-2.25%2010.95,-2.95%2020.3,-2.95l0.759,0.002l0.759,-0.002c9.35,0%2013.9,0.7%2020.3,2.95l2.341,0.807c17.825,-45.967%2062.496,-78.594%20114.727,-78.594c56.704,0%20104.497,38.453%20118.703,90.683l4.861,0.204c1.598,0.065%202.977,0.143%204.188,0.249c4.555,0.351%206.847,1.15%209.145,3.152c0.411,0.332%200.829,0.697%201.266,1.1c3.8,3.45%205.05,6.45%205.05,12.2l-0.001,0.335c0.048,4.88%20-1.207,8.097%20-4.331,11.315c-2.348,2.411%20-4.273,3.695%20-6.989,4.363c-1.51,0.395%20-3.262,0.615%20-5.429,0.737l-3.473,0.165c-0.806,67.195%20-55.607,121.498%20-122.991,121.498c-67.886,0%20-123,-55.114%20-123,-123c0,-2.528%200.076,-5.037%200.227,-7.527c-0.076,-0.062%20-2.648,-1.211%20-5.013,-2.185c-3.917,-1.402%20-5.893,-1.679%20-10.341,-1.699c-4.448,0.021%20-6.424,0.298%20-10.341,1.699c-2.366,0.974%20-3.842,1.476%20-4.761,2.148c0.152,2.502%200.229,5.024%200.229,7.565c0,67.886%20-55.114,123%20-123,123c-67.38,0%20-122.178,-54.297%20-122.991,-121.486Zm398.991,-87.614c-47.52,0%20-86.1,38.58%20-86.1,86.1c0,47.52%2038.58,86.1%2086.1,86.1c47.52,0%2086.1,-38.58%2086.1,-86.1c0,-47.52%20-38.58,-86.1%20-86.1,-86.1Zm-276,0c-47.52,0%20-86.1,38.58%20-86.1,86.1c0,47.52%2038.58,86.1%2086.1,86.1c47.52,0%2086.1,-38.58%2086.1,-86.1c0,-47.52%20-38.58,-86.1%20-86.1,-86.1Z%22%20style=%22fill:%23f7c528;%22/%3E%3C/g%3E%3C/svg%3E");
        }

        h1 {
            color: var(--text-main);
            font-size: 1.75em;
            font-weight: 800;
            letter-spacing: -0.5px;
            margin: 0;
            text-align: left;
            line-height: 1.1;
        }

        .subtitle {
            text-align: left;
            color: var(--text-light);
            margin-bottom: 40px;
            font-size: 1em;
            font-weight: 600;
            margin-top: -5px;
            padding-left: 63px;
        }

        /* Settings & Theme Icons (Optimized Position) */
        .header-icons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .icon-btn {
            font-size: 24px;
            cursor: pointer;
            color: var(--neutral-dark);
            transition: transform 0.2s ease, color 0.2s ease;
            filter: grayscale(100%);
            opacity: 0.5;
            background: none;
            border: none;
            padding: 5px;
            line-height: 1;
        }

        .icon-btn:hover {
            transform: scale(1.1);
            color: var(--primary);
            opacity: 1;
        }

        /* =========================================
           BUTTONS (The "Chunky" 3D Look)
           ========================================= */
        .btn, .sign-in-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            font-family: 'Nunito', sans-serif;
            font-weight: 800;
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            border: none;
            border-radius: var(--btn-radius);
            cursor: pointer;
            transition: all 0.1s ease;
            border-bottom: 4px solid rgba(0,0,0,0.2); 
            position: relative;
            top: 0;
        }

        .btn:active, .sign-in-btn:active {
            transform: translateY(4px);
            border-bottom-width: 0px;
            margin-top: 4px;
        }

        .btn:disabled {
            background-color: var(--neutral);
            color: var(--neutral-dark);
            border-bottom-color: rgba(0,0,0,0.1);
            cursor: not-allowed;
            transform: none !important;
            margin-top: 0 !important;
            border-bottom-width: 4px !important;
        }

        /* Button Variants */
        .btn-primary {
            background-color: var(--primary);
            color: white;
            border-bottom-color: var(--primary-shadow);
        }
        
        .sign-in-btn {
            background-color: var(--bg-surface);
            color: var(--text-main);
            border: 2px solid var(--border-color);
            border-bottom: 4px solid var(--border-color);
            text-transform: none;
            font-weight: 700;
            margin-bottom: 20px;
            width: 100%;
        }
        .sign-in-btn:hover {
            background-color: var(--input-bg);
            border-color: #dcdcdc;
            border-bottom-color: #dcdcdc;
            transform: translateY(-2px);
            box-shadow: none;
        }
        .sign-in-btn:active {
            transform: translateY(2px);
        }

        .btn-success {
            background-color: var(--success);
            color: white;
            border-bottom-color: var(--success-shadow);
        }

        .btn-error {
            background-color: var(--error);
            color: white;
            border-bottom-color: var(--error-shadow);
        }

        .btn-secondary {
            background-color: var(--bg-surface);
            color: var(--primary);
            border: 2px solid var(--border-color);
            border-bottom: 4px solid var(--border-color);
        }
        .btn-secondary:hover {
            background-color: var(--input-bg);
            transform: none;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--neutral-dark);
            color: var(--neutral-dark);
            border-bottom-width: 2px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 13px;
        }

        /* Controls Layout */
        .controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }
        
        .controls .btn {
            flex: 1;
            min-width: 100px;
            width: 100%;
        }

        /* =========================================
           FLASHCARD
           ========================================= */
        .flashcard {
            background: var(--bg-surface);
            color: var(--text-main);
            border: 2px solid var(--border-color);
            border-radius: var(--card-radius);
            box-shadow: 0 4px 0 var(--border-color);
            padding: 60px 30px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
            margin: 20px 0;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .flashcard:hover {
            transform: translateY(-2px);
            border-color: var(--primary);
            box-shadow: 0 6px 0 var(--primary-shadow);
        }

        .flashcard:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 var(--primary-shadow);
        }

        .flashcard-word {
            font-size: 2.2em;
            font-weight: 800;
            margin-bottom: 15px;
            color: var(--text-main);
        }

        .flashcard-translation {
            font-size: 1.4em;
            color: var(--primary);
            font-weight: 700;
        }

        .new-word-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 3px 0 var(--primary-shadow);
            border: none;
            backdrop-filter: none;
        }

        /* =========================================
           STATS & PROGRESS
           ========================================= */
        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding: 20px;
            background: var(--stats-bg);
            border-radius: 16px;
            border: 2px solid var(--border-color);
        }

        .stat-item {
            text-align: center;
            flex: 1;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: 800;
            color: var(--text-main);
        }

        .stat-label {
            font-size: 0.8em;
            color: var(--text-light);
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-top: 5px;
        }

        .progress-info {
            text-align: center;
            margin-bottom: 20px;
            padding: 0;
            background: transparent;
            color: var(--text-light);
            font-weight: 700;
        }
        
        .progress-info strong {
            color: var(--primary);
        }

        /* =========================================
           FORMS & INPUTS
           ========================================= */
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: var(--text-main);
        }

        .input-group input, .input-with-button input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 16px;
            font-family: 'Nunito', sans-serif;
            transition: all 0.2s ease;
            background: var(--input-bg);
            color: var(--text-main);
        }

        .input-group input:focus, .input-with-button input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(28, 176, 246, 0.15);
        }

        /* Fix for Settings Input Layout */
        .input-with-button {
            display: flex;
            gap: 10px;
            align-items: center; 
        }
        
        .input-with-button input {
            flex: 1; 
        }
        
        .input-with-button .btn {
            width: auto; 
            white-space: nowrap;
        }

        /* =========================================
           MODALS & DIALOGS
           ========================================= */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(40, 50, 60, 0.8);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.2s ease;
        }

        .modal-content {
            background: var(--bg-surface);
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            border: none;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
            animation: slideUp 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28); 
        }

        .modal-content h2 {
            color: var(--text-main);
            font-weight: 800;
            margin-bottom: 20px;
            margin-top: 0;
        }
        
        .modal-content p {
            color: var(--text-light);
            line-height: 1.6;
            margin: 15px 0;
        }

        .confirm-dialog {
            background: var(--bg-surface);
            padding: 30px;
            border-radius: 24px;
            text-align: center;
            border: 2px solid var(--border-color);
        }

        .confirm-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }

        /* =========================================
           INFO BOXES & STATUS
           ========================================= */
        .info-box {
            background: var(--info-box-bg);
            border: 2px solid var(--info-box-border);
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            text-align: left;
        }

        .info-box h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 800;
            margin-top: 0;
        }

        .info-box ol, .info-box ul {
            padding-left: 20px;
            color: var(--text-main);
        }
        
        .info-box li {
            margin-bottom: 8px;
        }

        .setup-section {
            background: var(--info-box-bg);
            border-radius: 16px;
            padding: 30px;
            border: 2px solid var(--border-color);
            text-align: left;
        }
        
        .setup-section h3 {
            color: var(--text-main);
            font-weight: 800;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .setup-section p {
             color: var(--text-main);
        }
        
        .setup-section ol {
             color: var(--text-main);
             padding-left: 15px;
        }

        .status-badge {
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 12px;
            display: inline-block;
        }

        .status-connected {
            background: #DFFFD6;
            color: var(--success);
            border: 2px solid var(--success);
        }
        
        [data-theme="dark"] .status-connected {
            background: rgba(88, 204, 2, 0.2);
            color: #75E022;
        }

        .session-info {
            background: #FFF5D1;
            border: 2px solid #FFC800;
            color: #8A6D00;
            border-radius: 12px;
            padding: 15px;
            font-weight: 700;
            margin: 15px 0;
        }
        
        [data-theme="dark"] .session-info {
            background: rgba(255, 200, 0, 0.1);
            color: #FFD540;
        }
        
        .srs-info {
            background: #E0F2FE;
            border: 2px solid var(--primary);
            color: #005F99;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        [data-theme="dark"] .srs-info {
            background: rgba(28, 176, 246, 0.1);
            color: #4AD0FF;
        }

        /* =========================================
           UTILITIES & HELPERS
           ========================================= */
        .hidden {
            display: none !important;
        }

        .menu-button {
            width: 100%;
            max-width: 100%;
            margin: 15px 0;
            font-size: 18px;
            padding: 16px;
        }
        
        .text-link {
            background: none; 
            border: none;     
            padding: 0;
            cursor: pointer;
            color: var(--primary);
            font-weight: 700;
            text-decoration: none;
            font-family: inherit;
            font-size: 13px;
        }
        .text-link:hover {
            text-decoration: underline;
        }
        .text-link.danger {
            color: var(--error);
        }

        .config-item {
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 15px;
            padding-bottom: 15px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .config-actions {
            display: flex;
            gap: 15px;
            margin-top: 5px;
        }

        /* =========================================
           FIXED: TOOLTIP LOGIC
           ========================================= */
        .button-with-tooltip {
            position: relative;
            display: inline-block;
        }

        .info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: var(--neutral-dark);
            color: var(--bg-surface);
            border-radius: 50%;
            font-size: 11px;
            font-weight: bold;
            cursor: help;
            margin-left: 8px;
        }

        .tooltip {
            visibility: hidden;
            opacity: 0;
            position: fixed;
            z-index: 11000;
            
            background: var(--text-main);
            color: var(--bg-surface);
            border-radius: 12px;
            padding: 15px;
            width: 250px;
            font-size: 12px;
            line-height: 1.5;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            font-weight: 600;
            transition: opacity 0.2s ease, visibility 0.2s ease;
            pointer-events: none;
            text-align: left;
            white-space: normal;
        }

        .button-with-tooltip:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 20px;
            }
            .header-row {
                align-items: flex-start;
            }
            .subtitle {
                padding-left: 0;
                text-align: center;
            }
            .flashcard-word {
                font-size: 1.8em !important;
            }
            .stats {
                flex-direction: row;
                gap: 10px;
            }
            .stat-value {
                font-size: 1.2em;
            }
            /* Tooltip on mobile */
            .tooltip {
                width: 200px;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- New Flex Header Layout -->
        <div class="header-row">
            <div class="logo-container">
            <div class="logo-icon"></div>
                <h1>FlashTick</h1>
            </div>
            
            <div class="header-icons">
                <button class="icon-btn" onclick="toggleTheme()" id="themeToggle" title="Toggle Dark Mode"></button>
                <button class="icon-btn" onclick="showSettings()" title="Settings"></button>
            </div>
        </div>
        
        <div class="subtitle">Master any subject with smart spaced repetition</div>

        <!-- Auth Section -->
        <div id="authSection" class="auth-section">
            <button class="sign-in-btn" onclick="signIn()">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" 
                    alt="Google" 
                    width="20" 
                    height="20" 
                    style="margin-right: 10px; vertical-align: middle;">
                Sign in with Google
            </button>
            <div class="setup-section">
                <h3> First Time Setup</h3>
                <p>This app uses YOUR Google Sheet to store your learning data. You'll need to:</p>
                <ol>
                    <li>Sign in with Google (above)</li>
                    <li>Create or select a Google Sheet with your content</li>
                    <li>Start practicing!</li>
                </ol>
                <p style="margin-top: 15px; font-size: 0.9em; color: var(--text-light);">
                     <strong>Note:</strong> Your data stays 100% private in your own Google account.
                </p>
            </div>
        </div>

        <!-- Main Menu Section -->
        <div id="menuSection" class="hidden menu-section">
            <div class="status-badge status-connected" id="connectionStatus">
                 Connected
            </div>
            
            <div id="srsInfo" class="srs-info hidden">
                <p><strong> Today's SRS Review</strong></p>
                <p id="srsInfoText">Loading... </p>
            </div>
            
            <div id="sessionInfo" class="session-info hidden">
                <p><strong> Session in Progress</strong></p>
                <p id="sessionInfoText">5 cards remaining</p>
            </div>

            <button id="startButton" class="btn btn-primary menu-button" onclick="handleStartPractice()">
                Start Practice
            </button>
            
            <button id="resumeButton" class="btn btn-success menu-button hidden" onclick="resumePractice()">
                Resume Session
            </button>
            
            <button class="btn btn-secondary menu-button" onclick="showSettings()">
                 Settings
            </button>
        </div>

        <!-- Main App Section -->
        <div id="appSection" class="hidden">
            <!-- Header with back button -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <button class="btn btn-secondary" onclick="returnToMenu()">
                    Menu
                </button>
                <span style="color: var(--text-light); font-size: 14px;" id="wordCountLabel">20 items loaded</span>
            </div>

            <!-- Progress Info -->
            <div class="progress-info" id="progressInfo">
                Practice session: <strong><span id="currentCardNum">0</span> of <span id="sessionTotal">0</span></strong>
            </div>

            <!-- Flashcard -->
            <div id="flashcard" class="flashcard" onclick="flipCard()">
                <div id="newWordBadge" class="new-word-badge hidden">New</div>
                <div class="flashcard-word" id="cardWord">Click to start</div>
                <div class="flashcard-translation hidden" id="cardTranslation"></div>
                <div style="margin-top: 15px; font-size: 0.9em; opacity: 0.7;" id="cardStage"></div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button class="btn btn-error" onclick="markWrong()">Wrong</button>
                <button class="btn btn-success" onclick="markCorrect()">Correct</button>
                <button class="btn btn-secondary" onclick="skipCard()">Skip</button>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="wrongCount">0</div>
                    <div class="stat-label">Wrong</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="correctCount">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalCount">0</div>
                    <div class="stat-label">Reviewed</div>
                </div>
            </div>
        </div>

        <!-- Session Complete Section -->
        <div id="completeSection" class="hidden">
            <h2 style="text-align: center; color: var(--primary); margin-bottom: 20px;"> Session Complete!</h2>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="finalCorrect">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="finalWrong">0</div>
                    <div class="stat-label">Wrong</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="finalAccuracy">0%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
            </div>

            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="returnToMenu()">
                    Home
                </button>
                <button class="btn btn-primary" onclick="startNewSessionFromComplete()">
                    Practice Again
                </button>
            </div>
        </div>
    </div>

    <!-- Google Identity Services Library -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js"></script>

    <script>
        // ===== CONFIGURATION =====
        const SCOPES = 'https://www.googleapis.com/auth/spreadsheets';
        const DEFAULT_BATCH_SIZE = 20;
        const MAX_SRS_STAGE = 8;
        
        // Get Client ID from localStorage
        let GOOGLE_CLIENT_ID = localStorage.getItem('googleClientId');
        
        // ===== STATE =====
        let tokenClient;
        let gapiInited = false;
        let gisInited = false;
        let accessToken = null;
        let spreadsheetId = localStorage.getItem('spreadsheetId');
        let sheetGid = localStorage.getItem('sheetGid') || '';
        let batchSize = parseInt(localStorage.getItem('batchSize')) || DEFAULT_BATCH_SIZE;
        
        let vocabulary = [];
        let sessionVocabulary = [];
        let currentCard = null;
        let currentCardIndex = 0;
        let isFlipped = false;
        let stats = {
            correct: 0,
            wrong: 0,
            total: 0
        };

        // Session state
        let sessionActive = false;
        let sessionData = null;

        // ===== UTILITY FUNCTIONS =====
        function maskClientId(clientId) {
            if (!clientId || clientId.length < 20) return '';
            const start = clientId.substring(0, 8);
            const end = clientId.substring(clientId.length - 8);
            return `${start}${end}`;
        }

        function showSection(sectionId) {
            const sections = ['authSection', 'menuSection', 'appSection', 'completeSection'];
            sections.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(sectionId). classList.remove('hidden');
        }

        function getTodayString() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // ===== THEME LOGIC =====
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            updateThemeIcon(next);
        }

        function updateThemeIcon(theme) {
            const btn = document.getElementById('themeToggle');
            btn.textContent = theme === 'dark' ? '' : '';
            btn.title = theme === 'dark' ? 'Switch to Light Mode' : 'Switch to Dark Mode';
        }

        // ===== CONFIRMATION DIALOG =====
        function showConfirmDialog(message, onConfirm, onCancel) {
            const dialogHTML = `
                <div id="confirmDialog" class="modal">
                    <div class="confirm-dialog">
                        <h3> Confirm Action</h3>
                        <p>${message}</p>
                        <div class="confirm-buttons">
                            <button class="btn btn-secondary" onclick="closeConfirmDialog(false)">
                                Cancel
                            </button>
                            <button class="btn btn-primary" onclick="closeConfirmDialog(true)">
                                Start New Session
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', dialogHTML);
            
            // Store callbacks
            window._confirmCallback = onConfirm;
            window._cancelCallback = onCancel;
        }

        function closeConfirmDialog(confirmed) {
            const dialog = document.getElementById('confirmDialog');
            if (dialog) dialog.remove();
            
            if (confirmed && window._confirmCallback) {
                window._confirmCallback();
            } else if (!confirmed && window._cancelCallback) {
                window._cancelCallback();
            }
            
            // Cleanup
            delete window._confirmCallback;
            delete window._cancelCallback;
        }

        // ===== SRS LOGIC =====
        function parseSRSData(word) {
            const srsStage = word.srsStage || 0;
            const lastReview = word.lastPracticed || '';
            
            return {
                ... word,
                srsStage: Math.min(srsStage, MAX_SRS_STAGE),
                lastReview: lastReview,
                isMastered: srsStage >= MAX_SRS_STAGE
            };
        }

        function calculateSRSQueue() {
            const today = getTodayString();
            
            const parsedVocab = vocabulary.map(parseSRSData);
            const activeCards = parsedVocab.filter(card => !card.isMastered);
            
            const failedCards = activeCards.filter(card => 
                card.lastReview === today && card.srsStage === 0
            );
            
            const dueCards = activeCards.filter(card => {
                if (card.srsStage === 0) return false;
                if (card.srsStage >= MAX_SRS_STAGE) return false;
                
                if (!card.lastReview) return true;
                
                const lastDate = new Date(card.lastReview);
                const todayDate = new Date(today);
                const daysSince = Math.floor((todayDate - lastDate) / (1000 * 60 * 60 * 24));
                
                return daysSince >= 1;
            });
            
            const newCards = activeCards.filter(card => 
                card.srsStage === 0 && card.lastReview !== today
            );
            
            const failCount = failedCards.length;
            const dueCount = dueCards.length;
            const newCardQuota = Math.max(0, batchSize - failCount - dueCount);
            
            const selectedNewCards = newCards.slice(0, newCardQuota);
            
            const todaysQueue = [
                ...failedCards,
                ...dueCards,
                ...selectedNewCards
            ];
            
            return {
                queue: todaysQueue,
                failedCount: failCount,
                dueCount: dueCount,
                newCount: selectedNewCards.length,
                totalActive: activeCards.length,
                totalMastered: vocabulary.length - activeCards.length
            };
        }

        function updateSRSInfo() {
            const srsData = calculateSRSQueue();
            const infoElement = document.getElementById('srsInfo');
            const textElement = document.getElementById('srsInfoText');
            
            if (srsData.queue.length === 0) {
                textElement.innerHTML = `
                     No cards due today!<br>
                    <small>Mastered: ${srsData.totalMastered}  Active: ${srsData.totalActive}</small>
                `;
            } else {
                textElement.innerHTML = `
                    <strong>${srsData.queue.length} cards</strong> due today<br>
                    <small>Failed: ${srsData.failedCount}  Due Reviews: ${srsData.dueCount}  New: ${srsData.newCount}</small><br>
                    <small>Mastered: ${srsData.totalMastered}  Active: ${srsData.totalActive}</small>
                `;
            }
            
            infoElement.classList.remove('hidden');
        }

        // ===== SESSION MANAGEMENT =====
        function loadSessionState() {
            const saved = localStorage.getItem('sessionState');
            if (saved) {
                try {
                    sessionData = JSON.parse(saved);
                    sessionActive = sessionData.active;
                    return sessionData;
                } catch (e) {
                    console.error('Error loading session state:', e);
                }
            }
            return null;
        }

        function saveSessionState() {
            const state = {
                active: sessionActive,
                currentIndex: currentCardIndex,
                sessionVocabulary: sessionVocabulary.map(card => card.rowIndex),
                stats: stats,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('sessionState', JSON.stringify(state));
        }

        function clearSessionState() {
            sessionActive = false;
            sessionData = null;
            localStorage.removeItem('sessionState');
        }

        function hasActiveSession() {
            const session = loadSessionState();
            // Session is active if it exists AND session is not completed
            return session && 
                   session.active && 
                   session.currentIndex < session.sessionVocabulary.length;
        }

        function updateMenuState() {
            const hasSession = hasActiveSession();
            
            if (hasSession) {
                const session = loadSessionState();
                const remaining = session.sessionVocabulary.length - session.currentIndex;
                const completed = session.currentIndex;
                
                document.getElementById('sessionInfo').classList.remove('hidden');
                document.getElementById('sessionInfoText').textContent = 
                    `${completed}/${session.sessionVocabulary.length} cards completed  ${remaining} remaining`;
                
                document.getElementById('startButton'). classList.remove('hidden');
                document.getElementById('resumeButton').classList.remove('hidden');
            } else {
                document.getElementById('sessionInfo').classList.add('hidden');
                document.getElementById('startButton').classList.remove('hidden');
                document.getElementById('resumeButton').classList.add('hidden');
            }
            
            // Update SRS info
            if (vocabulary.length > 0) {
                updateSRSInfo();
            }
        }

        function returnToMenu() {
            // Save current session state
            if (sessionActive) {
                saveSessionState();
            }
            
            // Reload vocabulary to get latest SRS data
            loadVocabulary(). then(() => {
                showSection('menuSection');
                updateMenuState();
            });
        }

        function handleStartPractice() {
            // Check if there's an active session
            if (hasActiveSession()) {
                showConfirmDialog(
                    'You have an unfinished session. Starting a new session will discard your current progress.  Are you sure? ',
                    () => {
                        // User confirmed - start new session
                        clearSessionState();
                        startPractice();
                    },
                    () => {
                        // User cancelled - do nothing
                    }
                );
            } else {
                // No active session - start directly
                startPractice();
            }
        }

        function startPractice() {
            if (!vocabulary || vocabulary.length === 0) {
                alert('No content loaded. Please check your Google Sheet connection.');
                return;
            }

            // Reset stats for new session
            stats = { correct: 0, wrong: 0, total: 0 };
            updateStats();

            // Start new session with SRS queue
            sessionActive = true;
            currentCardIndex = 0;
            
            createSRSSession();
            
            if (sessionVocabulary.length === 0) {
                alert(' No cards due for review today!\n\nAll your items are either mastered or not yet due for review.');
                sessionActive = false;
                return;
            }
            
            saveSessionState();
            
            showSection('appSection');
            loadNextCard();
        }

        function resumePractice() {
            const session = loadSessionState();
            if (!session || !session.active) {
                startPractice();
                return;
            }

            // Restore session state
            sessionActive = true;
            currentCardIndex = session.currentIndex;
            stats = session.stats;
            
            // Update stats display
            updateStats();
            
            // Reconstruct session vocabulary from saved indices
            sessionVocabulary = session.sessionVocabulary
                .map(rowIndex => vocabulary.find(v => v.rowIndex === rowIndex))
                .filter(v => v !== undefined)
                .map(parseSRSData);
            
            showSection('appSection');
            loadNextCard();
        }

        function startNewSessionFromComplete() {
            clearSessionState();
            
            // Reload vocabulary to get updated SRS data
            loadVocabulary().then(() => {
                startPractice();
            });
        }

        function createSRSSession() {
            const srsData = calculateSRSQueue();
            sessionVocabulary = srsData.queue;
            currentCardIndex = 0;
            
            // Update progress display
            updateProgressDisplay();
            
            console.log('SRS Session created:', {
                total: sessionVocabulary.length,
                failed: srsData.failedCount,
                due: srsData.dueCount,
                new: srsData.newCount
            });
        }

        // ===== CLIENT ID SETUP =====
        function showClientIdSetup() {
            const setupHTML = `
                <div id="clientIdSetupModal" class="modal">
                    <div class="modal-content">
                        <h2> Google OAuth Setup Required</h2>
                        <p>
                            To use this app, you need to create your own Google OAuth Client ID.
                            This ensures your data stays private and secure in YOUR Google Sheet.
                        </p>
                        
                        <div class="info-box">
                            <h3>Quick Setup Steps:</h3>
                            <ol>
                                <li>Click the button below to open Google Cloud Console</li>
                                <li>Create a new project (or select existing)</li>
                                <li>Enable "Google Sheets API"</li>
                                <li>Create "OAuth 2.0 Client ID" (Web application)</li>
                                <li>Add these to <strong>Authorized JavaScript origins</strong>:
                                    <ul>
                                        <li><code>http://localhost</code></li>
                                        <li><code>https://yourdomain.github.io</code> (if using GitHub Pages)</li>
                                    </ul>
                                </li>
                                <li>Copy your Client ID and paste it below</li>
                            </ol>
                        </div>
                        
                        <a href="https://console.cloud.google.com/apis/credentials" 
                           target="_blank" 
                           class="btn btn-secondary" 
                           style="display: inline-block; text-decoration: none; margin-bottom: 20px;">
                            Open Google Cloud Console
                        </a>
                        
                        <div class="input-group">
                            <input type="text" id="clientIdInput" 
                                   placeholder="Paste your Client ID here (ends with .apps.googleusercontent.com)">
                        </div>
                        
                        <button onclick="saveClientId()" class="btn btn-success" style="width: 100%;">
                            Save & Continue
                        </button>
                        
                        <p class="help-text">
                            Your Client ID will be saved locally in your browser. 
                        </p>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', setupHTML);
        }

        function saveClientId() {
            const input = document.getElementById('clientIdInput');
            const clientId = input.value.trim();
            
            // Validate Client ID format
            if (!clientId || !clientId.includes('.apps.googleusercontent.com')) {
                alert(' Please enter a valid Google Client ID\n\nIt should end with .apps.googleusercontent.com');
                return;
            }
            
            // Save to localStorage
            localStorage.setItem('googleClientId', clientId);
            GOOGLE_CLIENT_ID = clientId;
            
            // Remove setup modal
            const modal = document.getElementById('clientIdSetupModal');
            if (modal) modal.remove();
            
            // Initialize Google Auth with new Client ID
            location.reload();
        }

        function showSettings() {
            const currentClientId = localStorage.getItem('googleClientId') || 'Not set';
            const currentSheet = localStorage.getItem('spreadsheetId') || 'Not set';
            const currentGid = localStorage.getItem('sheetGid') || 'Not set';
            const currentBatchSize = localStorage.getItem('batchSize') || DEFAULT_BATCH_SIZE.toString();
            
            const settingsHTML = `
                <div id="settingsModal" class="modal" onclick="if(event.target.id==='settingsModal') closeSettings()">
                    <div class="modal-content" onclick="event.stopPropagation()">
                        <h2> Settings</h2>
                        
                        <div class="info-box">
                            <h3>Current Configuration</h3>
                            
                            <div class="config-item">
                                <div class="config-label">Google Client ID</div>
                                <div class="config-value masked-text">${maskClientId(currentClientId)}</div>
                                <div class="config-actions">
                                    <button class="text-link danger" onclick="resetClientId()">Reset</button>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="config-label">Spreadsheet ID</div>
                                <div class="config-value">${currentSheet !== 'Not set' ? currentSheet.substring(0, 30) + '...' : currentSheet}</div>
                                <div class="config-actions">
                                    <div class="button-with-tooltip" style="display: inline;">
                                        <button class="text-link" onclick="resetSpreadsheet()">Change</button>
                                        <span class="info-icon">i</span>
                                        <div class="tooltip">
                                            <strong>Expected Sheet Structure:</strong><br>
                                            Header in Row 1, data starts Row 2. <br><br>
                                            <strong>Columns (in order):</strong><br>
                                            1. Front (Question/Term)<br>
                                            2. Back (Answer/Definition)<br>
                                            3. Last Practice Date<br>
                                            4. SRS Stage (0-8)<br>
                                            5. Failed Count
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="config-label">Sheet GID</div>
                                <div class="config-value">${currentGid}</div>
                            </div>
                        </div>

                        <div class="info-box">
                            <h3> Spaced Repetition System (SRS)</h3>
                            <p style="font-size: 13px; line-height: 1.6;">
                                This app uses the "Tick-8" SRS method:<br>
                                 Correct answers advance the card to the next day<br>
                                 Wrong answers reset the card to Day 0<br>
                                 After 8 consecutive correct days, the item is mastered
                            </p>
                        </div>

                        <div class="info-box">
                            <h3>Daily Batch Size</h3>
                            <div class="input-with-button">
                                <input type="number" id="batchSizeInput" 
                                       value="${currentBatchSize}" 
                                       min="1" max="100"
                                       style="flex: 1; padding: 10px; border: 2px solid var(--border-color); border-radius: 6px; font-size: 14px;">
                                <button onclick="saveBatchSize()" class="btn btn-primary btn-small">
                                    Update
                                </button>
                            </div>
                        </div>
                        
                        <button onclick="closeSettings()" class="btn btn-secondary" style="width: 100%; margin-top: 20px;">
                            Close
                        </button>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', settingsHTML);
        }

        function closeSettings() {
            const modal = document.getElementById('settingsModal');
            if (modal) modal.remove();
        }

        function saveBatchSize() {
            const input = document.getElementById('batchSizeInput');
            const value = parseInt(input.value);
            
            if (isNaN(value) || value < 1 || value > 100) {
                alert(' Please enter a valid number between 1 and 100');
                return;
            }
            
            localStorage.setItem('batchSize', value.toString());
            batchSize = value;
            alert(' Batch size saved! Changes will apply to your next practice session.');
        }

        function resetClientId() {
            if (confirm('Are you sure you want to reset your Google Client ID?  You will need to enter it again.')) {
                localStorage.removeItem('googleClientId');
                localStorage.removeItem('spreadsheetId');
                localStorage.removeItem('sheetGid');
                clearSessionState();
                location.reload();
            }
        }

        function resetSpreadsheet() {
            if (confirm('Are you sure you want to change your spreadsheet? ')) {
                localStorage.removeItem('spreadsheetId');
                localStorage.removeItem('sheetGid');
                spreadsheetId = null;
                sheetGid = '';
                clearSessionState();
                closeSettings();
                promptForSpreadsheet();
            }
        }

        // ===== INITIALIZATION =====
        function gapiLoaded() {
            gapi.load('client', initializeGapiClient);
        }

        async function initializeGapiClient() {
            await gapi.client.init({
                apiKey: '',
                discoveryDocs: ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
            });
            gapiInited = true;
            maybeEnableButtons();
        }

        function gisLoaded() {
            if (!GOOGLE_CLIENT_ID) {
                return;
            }
            
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: GOOGLE_CLIENT_ID,
                scope: SCOPES,
                callback: '',
            });
            gisInited = true;
            maybeEnableButtons();
        }

        function maybeEnableButtons() {
            if (gapiInited && gisInited) {
                document.getElementById('authSection').classList.remove('hidden');
            }
        }

        // ===== AUTHENTICATION =====
        function signIn() {
            tokenClient.callback = async (resp) => {
                if (resp.error !== undefined) {
                    throw (resp);
                }
                accessToken = resp.access_token;
                
                document.getElementById('authSection').classList.add('hidden');
                
                if (!spreadsheetId) {
                    await promptForSpreadsheet();
                } else {
                    await loadVocabulary();
                    showSection('menuSection');
                    updateMenuState();
                }
            };

            if (gapi.client.getToken() === null) {
                tokenClient.requestAccessToken({prompt: 'consent'});
            } else {
                tokenClient.requestAccessToken({prompt: ''});
            }
        }

        // ===== SPREADSHEET MANAGEMENT =====
        async function promptForSpreadsheet() {
            const sheetUrl = prompt(
                ' Enter your Google Sheets URL:\n\n' +
                'Your sheet must have:\n' +
                ' Header in Row 1\n' +
                ' Data starting from Row 2\n\n' +
                'Column order (names can be anything):\n' +
                '1. Front (Question/Term)\n' +
                '2. Back (Answer/Definition)\n' +
                '3. Last Practice Date\n' +
                '4. SRS Stage (0-8)\n' +
                '5. Failed Count\n\n' +
                'Paste the full URL here:'
            );
            
            if (!sheetUrl) {
                alert(' You need a spreadsheet to continue!');
                return;
            }
            
            const sheetMatch = sheetUrl.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);
            const gidMatch = sheetUrl.match(/[#&]gid=([0-9]+)/);
            
            if (sheetMatch) {
                spreadsheetId = sheetMatch[1];
                sheetGid = gidMatch ? gidMatch[1] : '';
                
                localStorage.setItem('spreadsheetId', spreadsheetId);
                localStorage.setItem('sheetGid', sheetGid);
                
                await loadVocabulary();
                showSection('menuSection');
                updateMenuState();
            } else {
                alert(' Invalid Google Sheets URL. Please try again.');
                await promptForSpreadsheet();
            }
        }

        async function getSheetNameFromGid(gid) {
            try {
                const response = await gapi.client.sheets.spreadsheets.get({
                    spreadsheetId: spreadsheetId,
                });
                
                const sheets = response.result.sheets;
                
                if (gid) {
                    const sheet = sheets.find(s => s.properties.sheetId.toString() === gid);
                    if (sheet) {
                        return sheet.properties.title;
                    }
                }
                
                return sheets[0].properties.title;
            } catch (err) {
                console.error('Error getting sheet name:', err);
                return 'Sheet1';
            }
        }

        async function loadVocabulary() {
            try {
                const sheetName = await getSheetNameFromGid(sheetGid);
                console.log('Using sheet:', sheetName);
                
                // Always start from row 2 (header is row 1)
                const dataStartRow = 2;

                const response = await gapi.client.sheets.spreadsheets.values.get({
                    spreadsheetId: spreadsheetId,
                    range: `'${sheetName}'!A${dataStartRow}:E`,
                });

                const rows = response.result.values;
                if (!rows || rows.length === 0) {
                    alert(' Your spreadsheet is empty! Add some content first.');
                    return;
                }

                // Column mapping (ordinal, not by name):
                // Column 1 (A): Front
                // Column 2 (B): Back
                // Column 3 (C): Last Practice Date
                // Column 4 (D): SRS Stage (0-8)
                // Column 5 (E): Failed Count
                vocabulary = rows.map((row, index) => ({
                    rowIndex: dataStartRow + index,
                    sheetName: sheetName,
                    german: row[0] || '',
                    english: row[1] || '',
                    lastPracticed: row[2] || '',
                    srsStage: parseInt(row[3]) || 0,
                    wrongCount: parseInt(row[4]) || 0,
                })). filter(card => card.german && card.english);

                document.getElementById('wordCountLabel').textContent = `${vocabulary.length} items loaded`;
                
                console.log(`Loaded ${vocabulary.length} items from spreadsheet`);
            } catch (err) {
                console.error('Error loading content:', err);
                alert(' Error loading content. Check your spreadsheet and try again.\n\n' + err.message);
            }
        }

        function updateProgressDisplay() {
            document.getElementById('currentCardNum').textContent = currentCardIndex + 1;
            document.getElementById('sessionTotal').textContent = sessionVocabulary.length;
        }

        // ===== FLASHCARD LOGIC =====
        function loadNextCard() {
            if (currentCardIndex >= sessionVocabulary.length) {
                sessionActive = false;
                clearSessionState();
                showSessionComplete();
                return;
            }

            currentCard = sessionVocabulary[currentCardIndex];
            isFlipped = false;

            document.getElementById('cardWord').textContent = currentCard.german;
            document.getElementById('cardTranslation').textContent = currentCard.english;
            document.getElementById('cardTranslation').classList.add('hidden');
            
            // Show "New" badge only if never practiced
            const badge = document.getElementById('newWordBadge');
            if (!currentCard.lastPracticed || currentCard.lastPracticed === '') {
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
            
            // Show SRS stage only if has been practiced
            const stageElement = document.getElementById('cardStage');
            if (currentCard.lastPracticed && currentCard.lastPracticed !== '') {
                stageElement.textContent = `Day ${currentCard.srsStage}/8`;
            } else {
                stageElement.textContent = '';
            }
            
            updateProgressDisplay();
        }

        function flipCard() {
            if (!currentCard || isFlipped) return;
            
            isFlipped = true;
            document.getElementById('cardTranslation').classList.remove('hidden');
        }

        async function markCorrect() {
            if (!currentCard) return;
            
            const newStage = Math.min(currentCard.srsStage + 1, MAX_SRS_STAGE);
            currentCard.srsStage = newStage;
            
            stats.correct++;
            stats.total++;
            
            await updateCardInSheet(true);
            updateStats();
            
            currentCardIndex++;
            saveSessionState();
            loadNextCard();
        }

        async function markWrong() {
            if (!currentCard) return;
            
            currentCard.srsStage = 0;
            currentCard.wrongCount++;
            
            stats.wrong++;
            stats.total++;
            
            await updateCardInSheet(false);
            updateStats();
            
            currentCardIndex++;
            saveSessionState();
            loadNextCard();
        }

        function skipCard() {
            if (!currentCard) return;
            
            currentCardIndex++;
            saveSessionState();
            loadNextCard();
        }

        async function updateCardInSheet(isCorrect) {
            try {
                const today = getTodayString();
                
                // Update columns C, D, E (ordinal mapping)
                await gapi.client.sheets.spreadsheets.values.update({
                    spreadsheetId: spreadsheetId,
                    range: `'${currentCard.sheetName}'!C${currentCard.rowIndex}:E${currentCard.rowIndex}`,
                    valueInputOption: 'USER_ENTERED',
                    resource: {
                        values: [[
                            today,
                            currentCard.srsStage,
                            currentCard.wrongCount
                        ]]
                    }
                });

                const vocabIndex = vocabulary.findIndex(v => v.rowIndex === currentCard.rowIndex);
                if (vocabIndex !== -1) {
                    vocabulary[vocabIndex].lastPracticed = today;
                    vocabulary[vocabIndex].srsStage = currentCard.srsStage;
                    vocabulary[vocabIndex].wrongCount = currentCard.wrongCount;
                }
            } catch (err) {
                console.error('Error updating sheet:', err);
            }
        }

        function updateStats() {
            document.getElementById('correctCount').textContent = stats.correct;
            document.getElementById('wrongCount').textContent = stats.wrong;
            document.getElementById('totalCount').textContent = stats.total;
        }

        function showSessionComplete() {
            const accuracy = stats.total > 0 ? ((stats.correct / stats.total) * 100).toFixed(1) : 0;
            
            document.getElementById('finalCorrect').textContent = stats.correct;
            document.getElementById('finalWrong').textContent = stats.wrong;
            document.getElementById('finalAccuracy').textContent = accuracy + '%';
            
            showSection('completeSection');
        }

        // ===== INITIALIZATION ON LOAD =====
        window.addEventListener('load', function() {
            initTheme(); // Initialize theme preference
            
            if (!GOOGLE_CLIENT_ID) {
                showClientIdSetup();
            } else {
                gapiLoaded();
                gisLoaded();
            }
        });

        // ===== DYNAMIC TOOLTIP POSITIONING =====
        // This event listener automatically adjusts the position of any tooltip 
        // to ensure it stays within the browser window.
        document.addEventListener('mouseover', function(event) {
            // Check if we are hovering a tooltip wrapper
            const target = event.target.closest('.button-with-tooltip');
            if (target) {
                const tooltip = target.querySelector('.tooltip');
                if (tooltip) {
                    const rect = target.getBoundingClientRect();
                    const tooltipRect = tooltip.getBoundingClientRect();
                    const padding = 10; // Safety padding from screen edge

                    // 1. Calculate Default Position (Centered Above)
                    // Note: offsetHeight might be 0 if hidden, but opacity:0/visibility:hidden usually retains layout. 
                    // If not, we might need to momentarily display it, but in this CSS setup it works.
                    let top = rect.top - tooltipRect.height - 10;
                    let left = rect.left + (rect.width / 2) - (tooltipRect.width / 2);
                    
                    // 2. Horizontal Constraints (Keep inside Left/Right edges)
                    if (left < padding) {
                        left = padding; // Pin to left
                    } else if (left + tooltipRect.width > window.innerWidth - padding) {
                        left = window.innerWidth - tooltipRect.width - padding; // Pin to right
                    }

                    // 3. Vertical Constraints (If not enough space on top, flip to bottom)
                    if (top < padding) {
                        top = rect.bottom + 10;
                    }

                    // 4. Apply Calculated Positions
                    tooltip.style.top = top + 'px';
                    tooltip.style.left = left + 'px';
                }
            }
        });
    </script>
</body>
</html>